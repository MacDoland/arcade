!function(){"use strict";function e(e){return e>0?1:-1}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)};var a,t,n,r,o,c,i,s,u,l,d,m,y,b,h,f,x,w,p,v,L=2*Math.PI,T=800,k=600,g=50,A=400,q=!1,C=!1,I=!1,M=!1,E=!1,S=!1,O=9,F=0,B=[],N={x:0,y:0},R={x:0,y:0},H=3,V=3,Y=!1,z=!1,D={r:15,q:5,h:"#eee"},P={r:10,h:"#f11",v:0},W=!1,G=[],K=["LOST LOVE     <br><br>Your passion is bright but will you be able to beat the 7 trials and find Love in the shadows . . . <br>. . . in time?    <br><br>Use AWSD or arrow keys (&lArr;&uArr;&dArr;&rArr;) to move     <br><br><em>Press ENTER to PLAY</em>","You walked away in order to find Love, and overcame Love&rsquo;s seven trials!    <br><br>You found the Lost and Lasting Love!    <br><br><em>Throw it all away and search again?</em>","You&rsquo;ve had all your chances    <br><br>Maybe you should ...    <br><em>try again!</em>","Too slow!    <br><br>Love doesn&rsquo;t wait around    <br><em>Try faster</em>","Love was in the air!   <br><br>But blew away in the wind.    <br><br><em>Next Level ...</em>","Love led you a merry dance.   <br><br>And skipped away.    <br><br><em>Next Level ...</em>","Did Love leave you in a spin?!   <br><br>Don&rsquo;t be dizzy.    <br><br><em>Next Level ...</em>","There is no lasting Love before the mast.    <br><br>Time to cast off.    <br><br><em>Next Level ...</em>","You walked the pathway LOST    <br><br>One more trial for Love be found.   <br><br><em>Next Level ...</em>","Did I say ONE more?    <br><br>Sorry, but there&rsquo;s another. Love can be cruel like that.   <br><br><em>Final level.    Honest.</em>"],U=0,j="",J=[];function Q(e){if(e>=v)return te(1),re("LOST LOVE"),void(W=!1);for(te(J[e].m),re(J[e].id),W=!1,B.length=0,j=J[e].w,t=j.length/9,a=0;a<t;a++)(m={}).x1=10*parseInt(j.substr(1+9*a,2),16),m.y1=10*parseInt(j.substr(3+9*a,2),16),m.x2=10*parseInt(j.substr(5+9*a,2),16),m.y2=10*parseInt(j.substr(7+9*a,2),16),m.v=parseInt(j.substr(0+9*a,1),16),B.push(m);X(e)}function X(e){F=0,P.x=J[e].hx,P.y=J[e].hy,D.x=J[e].px,D.y=J[e].py,O=J[e].t}function Z(){var n;P.t++,P.s=(n=P.t,.6*n/150+1.2),C&&(D.x+=H),I&&(D.x-=H),M&&(D.y-=H),E&&(D.y+=H),function(){O-++F/60<=0&&(W=!1,Y=!0,V--,oe(),0===V?(te(2),z=!0):te(3));e=O-F/60,y.innerHTML="TIME:"+(Math.ceil(e)<10?"0":"")+Math.ceil(e);var e}(),function(){for(t=B.length,a=0;a<t;a++)(m=B[a]).v?D.y>=m.y1-D.q&&D.y<m.y2+D.q&&(u=D.x-m.x1,Math.abs(u)<D.r&&(D.x+=15*e(u),ee(!0))):D.x>=m.x1-D.q&&D.x<m.x2+D.q&&(l=D.y-m.y1,Math.abs(l)<D.r&&(D.y+=15*e(l),ee(!0)));u=P.x-D.x,l=P.y-D.y,d=Math.sqrt(u*u+l*l),P.v=Math.max(0,(n=d,r=500,o=30,c=0,i=1,c+(n-r)/(o-r)*(i-c))),d<D.r+P.r&&(ee("h"),P.v=0,Q(++U));var n,r,o,c,i}()}function $(){n.clearRect(0,0,T,k),n.fillStyle=D.h,r(),n.arc(D.x,D.y,D.r,0,L),n.fill(),n.fillStyle=P.h,r(),_(11,-3,11,-3),_(11,-9,8,-11),_(4,-13,0,-9),_(-3,-13,-7,-11),_(-10,-9,-10,-3),_(-10,3,0,11),_(11,3,11,-3),n.fill(),function(){for(t=B.length,a=0;a<t;a++)m=B[a],N.x=65*(m.x1-D.x),N.y=65*(m.y1-D.y),R.x=65*(m.x2-D.x),R.y=65*(m.y2-D.y),n.fillStyle="rgba(0,0,0,.3)",r(),o(m.x1,m.y1),c(N.x,N.y),c(R.x,R.y),c(m.x2,m.y2),n.fill(),r(),n.strokeStyle="#000",n.lineWidth="7",o(m.x1,m.y1),c(m.x2,m.y2),n.stroke()}()}function _(e,a,t,r){n.quadraticCurveTo(P.x+e*P.s,P.y+a*P.s,P.x+t*P.s,P.y+r*P.s)}function ee(e){if(!q){var a=i.createGain(),t=i.createOscillator();switch(a.connect(i.destination),a.gain.setValueAtTime(0,i.currentTime),a.gain.linearRampToValueAtTime(e?1:P.v,i.currentTime+.001*g),a.gain.linearRampToValueAtTime(0,i.currentTime+.001*A),e){case!0:s=82;break;case"h":s=233;break;default:s=92}t.frequency.value=s,t.connect(a),t.start(0),setTimeout(function(){t.stop(0),t.disconnect(a),a.disconnect(i.destination)},A)}}function ae(){W&&(Z(),$(),requestAnimFrame(ae))}function te(e){b.style.display="block",G.length=0,x=0,w="",G=K[e].split(" "),b.innerHTML="",ne()}function ne(){var e=G[x++];void 0===e&&(e=""),w+=e+" ",b.innerHTML=w,x<G.length?p=setTimeout(ne,100):S=!0}function re(e){h.innerHTML="LEVEL "+(U+1)+": &ldquo;"+e+"&rdquo;"}function oe(){f.className="l"+V}function ce(e){b.style.display="none",S=!1,b.removeEventListener("click",ce,!1),b.innerHTML="",z&&(z=!1,V=3,oe()),Y&&(Y=!1,X(U)),W=!0,U===v&&(U=0,V=3,oe(),Q(U),$(),clearTimeout(p),te(0)),ae()}function ie(e){switch(e.keyCode){case 37:case 65:I=!0;break;case 38:case 87:M=!0;break;case 39:case 68:C=!0;break;case 40:case 83:E=!0}}function se(e){switch(e.keyCode){case 37:case 65:I=!1;break;case 38:case 87:M=!1;break;case 39:case 68:C=!1;break;case 40:case 83:E=!1;break;case 13:S&&ce()}}J.push({px:400,py:350,hx:400,hy:150,t:20,m:0,id:"First Kiss",w:"0000050000003c503c10000003c15000503c000140a14014143c140461450140001e231e02d1e501e00028232802d285028000320a32014323c32046325032"}),J.push({px:750,py:550,hx:50,hy:500,t:30,m:4,id:"Square Dance",w:"0000050000003c503c10000003c15000503c00a0a460a01e143c1401e1e3c1e02828462801432503210a0a0a3c11414143211e1e1e3213c143c1e1460a4628"}),J.push({px:450,py:150,hx:750,hy:250,t:30,m:5,id:"Snail",w:"0000050000003c503c10000003c15000503c0000a280a0320a460a014143c1404614501401e1e321e02828322800a32143202832463210a140a3211414143211e1e1e3c1321e322813c143c321460a4632"}),J.push({px:550,py:150,hx:650,hy:550,t:25,m:6,id:"Pirate&rsquo;s Skull",w:"0000050000003c503c10000003c15000503c00a0a1e0a0320a460a000140a14014141e1403214461401e1e3c1e014282828032283c2800a32463211414142811e0a1e1412800281e1282828321320a321413c1e3c2814632463c"}),J.push({px:50,py:150,hx:650,hy:550,t:25,m:7,id:"L O S T",w:"0000050000003c503c10000003c15000503c0000a0a0a0140a460a0281446140461e501e0281e3c1e00a28322800032143202832323210a000a281140a141e11e141e2811e321e3c12814281e13214321e13228323213c0a3c1413c1e3c3c1461e463c"}),J.push({px:350,py:350,hx:450,hy:350,t:30,m:8,id:"Think Outside the Box",w:"0-a-a5a-a0000050000003c503c0-a465a461-a-a-a4610000001e10028003c12800283c15000501e15028503c15a-a5a46"}),J.push({px:350,py:450,hx:550,hy:450,t:45,m:9,id:"Love can be Cruel",w:"014-f3c-f0-a-a14-a03c-a5a-a01e-532-50-f00-a00000000a00032003c000460050000-50a000a00a0a1e0a0-f14-a14028143c14050145a140321e461e0003c283c0323c503c0-a460a4601e463c46046465a460145046501-f00-f141-a-a-a001-a14-a4610000001e10028003c10a000a0a10a3c0a46114-f14001143c145011e-51e0a12814283c132-532001321e323c13c-f3c-a13c003c1413c3c3c4614600461e14646465015000502815032503c15a-a5a46"}),v=J.length,function(){y=document.getElementById("t"),f=document.getElementById("l"),b=document.getElementById("m"),h=document.getElementById("n");var e=document.createElement("canvas",T,k);e.width=T,e.height=k,document.getElementById("w").appendChild(e),(n=e.getContext("2d")).lineCap="round",i="undefined"!=typeof AudioContext?new AudioContext:"undefined"!=typeof webkitAudioContext?new webkitAudioContext:"undefined"!=typeof mozAudioContext?new mozAudioContext:(q=!0,void console.log("Web Audio API is not supported")),r=function(){return n.beginPath()},o=function(e,a){return n.moveTo(e,a)},c=function(e,a){return n.lineTo(e,a)},document.onkeydown=ie,document.onkeyup=se,Q(U),$(),clearTimeout(p),te(0)}(),function e(){P.t=0,ee(),setTimeout(function(){P.t=0,ee()},350),setTimeout(function(){e()},1500)}(),ae()}();